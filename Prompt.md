السياق (Context)

عندي Vue + Pinia + Laravel API.

أتعامل مع سلة (cart) فيها وضعين: ضيف (localStorage) أو مستخدم مسجل (server).

عند تسجيل الدخول/التسجيل، أريد:

أن يرجع المستخدم تلقائيًا للصفحة اللي كان فيها (مش الصفحة الرئيسية).

أن تُدمج السلة المحلية مع سلة الحساب على الخادم (syncLocalCart).

البرومبت (Prompt)

"عدّل لي كود تسجيل الدخول والتسجيل بحيث يحل مشكلتين:

بعد نجاح العملية يرجع المستخدم لنفس الصفحة اللي كان فيها قبل فتح نافذة الـ Login/Register.

يتم استدعاء cartStore.syncLocalCart() مباشرة بعد تسجيل الدخول/التسجيل لنقل السلة من localStorage إلى حسابه.
وضّح لي أماكن التعديل في كل من handleLogin و handleRegister."